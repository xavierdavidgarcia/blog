<!doctype html>
<html>
<head>
    <base href="/">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
<meta name="author" content="Xavier Garcia">

<meta name="description" content="">

<title>Write Functions In Functional Programming Style In Scala</title>
<meta name="generator" content="Hugo 0.57.2" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.1.0/styles/pojoaque.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.1.0/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>

<link href="https://fonts.googleapis.com/css?family=Source+Code+Pro:400,700" rel="stylesheet" type="text/css">
<link  href="/css/theme.min.css" rel="stylesheet" type="text/css">

</head>
<body>
<div class="page-container container-fluid">
<div class="col-md-3 menu">
    <nav class="col-md-3">
    <h3 class="home-link"><a href="https://xavier-garcia.com">Root</a></h3>
    <div id="last-posts" class="open">
        <h3 data-open="last-posts">Xavier Garcia - Most recent posts</h3>
        <ul>
            
            <li><a href="/post/minikube-and-debian9/">How to setup minikube lab on debian 9 with virtualbox</a></li>
            
            <li><a href="/post/moving_kops_aws_kubernetes_api_from_public_to_internal_elb/">Moving Kops Aws Kubernetes API from Public to Internal ELB</a></li>
            
            <li><a href="/post/how_to_create_a_helm_chart_repository_using_amazon_s3/">How to create a Helm chart repository using Amazon S3</a></li>
            
            <li><a href="/post/configure_automatically_external_dns_on_kubernetes/">Configure automatically external dns on Kubernetes</a></li>
            
            <li><a href="/post/manage_your_friends_with_microservice_in_golang/">Manage your friends with a microservice in Golang</a></li>
            
            <li><a href="/post/what_is_tensor_flow/">What is TensorFLow</a></li>
            
            <li><a href="/post/deploy_kubernetes_cluster_with_kops/">Deploy Kubernetes cluster with Kops and AWS s3 state</a></li>
            
            <li><a href="/post/install_lets_encrypt_debian_9_nginx/">Install Let&#39;s Encrypt with Nginx on Debian 9</a></li>
            
            <li><a href="/post/design_patterns_in_golang-part-5/">Design Patterns in Golang - Part-5</a></li>
            
            <li><a href="/post/design_patterns_in_golang-part-4/">Design Patterns in Golang - Part-4</a></li>
            
            <li><a href="/post/design_patterns_in_golang-part-3/">Design Patterns in Golang - Part-3</a></li>
            
            <li><a href="/post/design_patterns_in_golang-part-2/">Design Patterns in Golang - Part-2</a></li>
            
            <li><a href="/post/design_patterns_in_golang-part-1/">Design Patterns in Golang - Part-1</a></li>
            
            <li><a href="/post/how_do_i_get_the_certificate_authority_certificate_key/">How do I get the certificate authority certificate/key from a cluster created by kops?</a></li>
            
            <li><a href="/post/install_drdb_cluster_on_centos_7/">Install DRDB Cluster on Centos 7</a></li>
            
            <li><a href="/post/write_functions_in_functional_programming_style_in_scala/">Write Functions In Functional Programming Style In Scala</a></li>
            
            <li><a href="/post/decision_trees_in_python/">Decision trees in python</a></li>
            
            <li><a href="/post/logistic_regression_in_python/">Logistic Regression in python</a></li>
            
            <li><a href="/post/linear_regression_in_python/">Linear Regression in python</a></li>
            
            <li><a href="/post/clean_clean_my_docker/">Clean clean my docker</a></li>
            
            <li><a href="/post/my_docker_alias/">Docker alias for your zsh</a></li>
            
            <li><a href="/post/encryption_with_rsa/">Encryption with an RSA</a></li>
            
            <li><a href="/post/how_to_write_good_post_mortem/">How to Write a good post mortem</a></li>
            
            <li><a href="/post/how_to_write_product_requirements_document/">How to Write a Product Requirements Document (PRD)</a></li>
            
            <li><a href="/post/curl_http-2_support/">cURL HTTP/2 support</a></li>
            
            <li><a href="/post/template-7/">Bindwith PostgreSQL backend at CentOS 6.4</a></li>
            
            <li><a href="/post/how_to_install_and_configure_glusterfs_server_on_ubuntu/">How to install and configure GlusterFS Server on Ubuntu</a></li>
            
            <li><a href="/post/template-5/">Linear Regression in python</a></li>
            
            <li><a href="/post/ipv6_on_ubiquity_edge_router_lite/">Activate IPv6 on Ubiquity Edge router lite</a></li>
            
        </ul>
    </div>

    
    <div id="tags" class="open">
        <h3 data-open="tags">Tags</h3>
        <ul class="tags" style="display: none;">
            
            <li><a href="/tags/agile">agile</a></li>
            
            <li><a href="/tags/aws">aws</a></li>
            
            <li><a href="/tags/centos">centos</a></li>
            
            <li><a href="/tags/code">code</a></li>
            
            <li><a href="/tags/container">container</a></li>
            
            <li><a href="/tags/curl">curl</a></li>
            
            <li><a href="/tags/debian">debian</a></li>
            
            <li><a href="/tags/design">design</a></li>
            
            <li><a href="/tags/designpattern">designpattern</a></li>
            
            <li><a href="/tags/dev">dev</a></li>
            
            <li><a href="/tags/development">development</a></li>
            
            <li><a href="/tags/devops">devops</a></li>
            
            <li><a href="/tags/dns">dns</a></li>
            
            <li><a href="/tags/docker">docker</a></li>
            
            <li><a href="/tags/drdb">drdb</a></li>
            
            <li><a href="/tags/encrypt">encrypt</a></li>
            
            <li><a href="/tags/filesystem">filesystem</a></li>
            
            <li><a href="/tags/functional">functional</a></li>
            
            <li><a href="/tags/glusterfs">glusterfs</a></li>
            
            <li><a href="/tags/go">go</a></li>
            
            <li><a href="/tags/golang">golang</a></li>
            
            <li><a href="/tags/helm">helm</a></li>
            
            <li><a href="/tags/http">http</a></li>
            
            <li><a href="/tags/ipv6">ipv6</a></li>
            
            <li><a href="/tags/kops">kops</a></li>
            
            <li><a href="/tags/kubernetes">kubernetes</a></li>
            
            <li><a href="/tags/lab">lab</a></li>
            
            <li><a href="/tags/letsencrypt">letsencrypt</a></li>
            
            <li><a href="/tags/linux">linux</a></li>
            
            <li><a href="/tags/machinelearning">machinelearning</a></li>
            
            <li><a href="/tags/microservice">microservice</a></li>
            
            <li><a href="/tags/minikube">minikube</a></li>
            
            <li><a href="/tags/mongodb">mongodb</a></li>
            
            <li><a href="/tags/network">network</a></li>
            
            <li><a href="/tags/nginx">nginx</a></li>
            
            <li><a href="/tags/postmortem">postmortem</a></li>
            
            <li><a href="/tags/prd">prd</a></li>
            
            <li><a href="/tags/product">product</a></li>
            
            <li><a href="/tags/project_management">project_management</a></li>
            
            <li><a href="/tags/python">python</a></li>
            
            <li><a href="/tags/router">router</a></li>
            
            <li><a href="/tags/rsa">rsa</a></li>
            
            <li><a href="/tags/s3">s3</a></li>
            
            <li><a href="/tags/scala">scala</a></li>
            
            <li><a href="/tags/scrum">scrum</a></li>
            
            <li><a href="/tags/security">security</a></li>
            
            <li><a href="/tags/shell">shell</a></li>
            
            <li><a href="/tags/ssh">ssh</a></li>
            
            <li><a href="/tags/ssl">ssl</a></li>
            
            <li><a href="/tags/startup">startup</a></li>
            
            <li><a href="/tags/tensorflow">tensorflow</a></li>
            
            <li><a href="/tags/ubiquity">ubiquity</a></li>
            
        </ul>
    </div>
    

    
</nav>

</div>
<div class="col-md-9 content">

<h1>Write Functions In Functional Programming Style In Scala</h1>
<h4>Published 06-17-2017 00:00:00</h4>

<article>
    <p>When you write programs in a functional style it is a requirement that you use pure functions. To begin understanding the concept of pure functions we first need to understand what referential transparency is. An expression satisfies referential transparency if its result can replace it and program behavior does not change in any way. This replacement does not depend on context so it must hold wherever substitution happens in the program.</p>

<p>To demonstrate this consider two immutable variables used in an expression as shown below</p>

<pre><code>a + b
</code></pre>

<p>Let us create another expression as shown below</p>

<pre><code>val c = a + b
</code></pre>

<p>Wherever we can use the expression a + b in our program we can instead use c and get the same results. This is an overly simplified example of how referential transparency is implemented.
For a function to be deemed pure it needs to satisfy two properties. These are referential transparency and no side effects on its inputs.
When working with pure functions it is important to keep the following points in mind.</p>

<ul>
<li>The number of input parameters passed to a function is one or more</li>
<li>Results of a function only depend on passed parameters and defined expressions.</li>
<li>The function should not change any of the passed parameters</li>
<li>The function is not allowed to change the state of either its class or object</li>
<li>Pure functions are not allowed to engage in any I/O activities like doing disk reads, writes and interacting with user via input</li>
</ul>

<p>Before we demonstrate how to convert impure functions to pure functions it is important to highlight some examples of each. Examples of pure functions are</p>

<ul>
<li>Mathematical operations, although they may not seem so they are function calls. For example look at the addition example given previously. It operates on a and b and returns a result which only relies on a and b without changing them</li>
<li>Methods such as map and filter that operate on immutable collections</li>
</ul>

<p>Examples of impure functions are</p>

<ul>
<li>Methods that operate on date and time given an input will return a different value when called at different times. Such functions violate the property of referential transparency.</li>
<li>Functions that perform reads and writes on external data</li>
</ul>

<p>From the previous discussion it is clear functional programming places restrictions on some aspects that would be required for a software program to work. It is unthinkable a program would work without processing user input or performing database reads and writes. The best approach to this dilemma is to create as much functional code then develop small code base to deal with operations that have side effects. This way you are able to get the best from each programming style.</p>

<p>When impure functions update their state it results in side effects which violate referential transparency. To overcome this violation we avoiding updating state by use of side effects and instead return new state together with the value we have generated. By doing this we leave the old state intact. Whenever you are faced with the problem of converting a problem into a pure function this is the approach to use.
In the next section we are going to look at how we can convert a java class written using object oriented design to a Scala functional program. Consider the java program below that is used to filter, sort and place names in a list.</p>

<pre><code>public class User {
  private final int id;
  private final String firstName;
  private final String lastName;
  private final Boolean active;  
}
public static List&lt;String&gt; activeById(List&lt;User&gt; us) {
   List&lt;User&gt; users = new ArrayList&lt;User&gt;();
   for (User u: us) {
     if (u.getActive()) users.add(u);
   }
   Collections.sort(users, new Comparator&lt;User&gt;() {
      public int compare(User a, User b) {
        return a.getId() - b.getId();
      } 
   });
   
   List&lt;String&gt; finalUsers = new ArrayList&lt;String&gt;();
   for (User u: users) {
     finalUsers.add(u.getLastname());
   }
   return finalUsers;
}
List&lt;User&gt; inputUsers = new ArrayList&lt;User&gt;();
inputUsers.add(new User(30, &quot;don&quot;, &quot;Arachi&quot;, false));
inputUsers.add(new User(22, &quot;james&quot;, &quot;blaine&quot;, true));
inputUsers.add(new User(44, &quot;aggrey&quot;, &quot;kevin&quot;, true));
List&lt;User&gt; activeUsersById = activeById(inputUsers)
</code></pre>

<p>When we rewrite the above java program into a functional Scala program the result is shown below. In our Scala program we have used filter and map methods that we had earlier noted are examples of pure functions. In the Scala program there is no need to maintain state so the code becomes cleaner. Another benefit of not changing variables comes when writing high concurrency programs you are sure there will be no problems.</p>

<p>In a functional approach we split our tasks into many small methods. This is referred to as composition. In the simplified functional code we have relied on filter, sortBy and map methods</p>

<pre><code>case class User(id: Int, firstname: String, lastname: String, active: Boolean)
def activeById(us: Seq[User]) = us.filter(_.active).sortBy(_.id).map(_.lastname)
val activeUsersById = activeById(Seq(
  User(30, &quot;don&quot;, &quot;arachi&quot;, false),
  User(22, &quot;james&quot;, &quot;blaine&quot;, true),
  User(44, &quot;aggrey&quot;, &quot;kevin&quot;, true)
))
</code></pre>

</article>



</div>
</div>
<script src="/js/theme.min.js" type="text/javascript"></script>


</body>
</html>

