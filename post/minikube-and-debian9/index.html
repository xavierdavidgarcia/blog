<!doctype html>
<html>
<head>
    <base href="/">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
<meta name="author" content="Xavier Garcia">

<meta name="description" content="">

<title>How to setup minikube lab on debian 9 with virtualbox</title>
<meta name="generator" content="Hugo 0.57.2" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.1.0/styles/pojoaque.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.1.0/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>

<link href="https://fonts.googleapis.com/css?family=Source+Code+Pro:400,700" rel="stylesheet" type="text/css">
<link  href="/css/theme.min.css" rel="stylesheet" type="text/css">

</head>
<body>
<div class="page-container container-fluid">
<div class="col-md-3 menu">
    <nav class="col-md-3">
    <h3 class="home-link"><a href="https://xavier-garcia.com">Root</a></h3>
    <div id="last-posts" class="open">
        <h3 data-open="last-posts">Xavier Garcia - Most recent posts</h3>
        <ul>
            
            <li><a href="/post/minikube-and-debian9/">How to setup minikube lab on debian 9 with virtualbox</a></li>
            
            <li><a href="/post/moving_kops_aws_kubernetes_api_from_public_to_internal_elb/">Moving Kops Aws Kubernetes API from Public to Internal ELB</a></li>
            
            <li><a href="/post/how_to_create_a_helm_chart_repository_using_amazon_s3/">How to create a Helm chart repository using Amazon S3</a></li>
            
            <li><a href="/post/configure_automatically_external_dns_on_kubernetes/">Configure automatically external dns on Kubernetes</a></li>
            
            <li><a href="/post/manage_your_friends_with_microservice_in_golang/">Manage your friends with a microservice in Golang</a></li>
            
            <li><a href="/post/what_is_tensor_flow/">What is TensorFLow</a></li>
            
            <li><a href="/post/deploy_kubernetes_cluster_with_kops/">Deploy Kubernetes cluster with Kops and AWS s3 state</a></li>
            
            <li><a href="/post/install_lets_encrypt_debian_9_nginx/">Install Let&#39;s Encrypt with Nginx on Debian 9</a></li>
            
            <li><a href="/post/design_patterns_in_golang-part-5/">Design Patterns in Golang - Part-5</a></li>
            
            <li><a href="/post/design_patterns_in_golang-part-4/">Design Patterns in Golang - Part-4</a></li>
            
            <li><a href="/post/design_patterns_in_golang-part-3/">Design Patterns in Golang - Part-3</a></li>
            
            <li><a href="/post/design_patterns_in_golang-part-2/">Design Patterns in Golang - Part-2</a></li>
            
            <li><a href="/post/design_patterns_in_golang-part-1/">Design Patterns in Golang - Part-1</a></li>
            
            <li><a href="/post/how_do_i_get_the_certificate_authority_certificate_key/">How do I get the certificate authority certificate/key from a cluster created by kops?</a></li>
            
            <li><a href="/post/install_drdb_cluster_on_centos_7/">Install DRDB Cluster on Centos 7</a></li>
            
            <li><a href="/post/write_functions_in_functional_programming_style_in_scala/">Write Functions In Functional Programming Style In Scala</a></li>
            
            <li><a href="/post/decision_trees_in_python/">Decision trees in python</a></li>
            
            <li><a href="/post/logistic_regression_in_python/">Logistic Regression in python</a></li>
            
            <li><a href="/post/linear_regression_in_python/">Linear Regression in python</a></li>
            
            <li><a href="/post/clean_clean_my_docker/">Clean clean my docker</a></li>
            
            <li><a href="/post/my_docker_alias/">Docker alias for your zsh</a></li>
            
            <li><a href="/post/encryption_with_rsa/">Encryption with an RSA</a></li>
            
            <li><a href="/post/how_to_write_good_post_mortem/">How to Write a good post mortem</a></li>
            
            <li><a href="/post/how_to_write_product_requirements_document/">How to Write a Product Requirements Document (PRD)</a></li>
            
            <li><a href="/post/curl_http-2_support/">cURL HTTP/2 support</a></li>
            
            <li><a href="/post/template-7/">Bindwith PostgreSQL backend at CentOS 6.4</a></li>
            
            <li><a href="/post/how_to_install_and_configure_glusterfs_server_on_ubuntu/">How to install and configure GlusterFS Server on Ubuntu</a></li>
            
            <li><a href="/post/template-5/">Linear Regression in python</a></li>
            
            <li><a href="/post/ipv6_on_ubiquity_edge_router_lite/">Activate IPv6 on Ubiquity Edge router lite</a></li>
            
        </ul>
    </div>

    
    <div id="tags" class="open">
        <h3 data-open="tags">Tags</h3>
        <ul class="tags" style="display: none;">
            
            <li><a href="/tags/agile">agile</a></li>
            
            <li><a href="/tags/aws">aws</a></li>
            
            <li><a href="/tags/centos">centos</a></li>
            
            <li><a href="/tags/code">code</a></li>
            
            <li><a href="/tags/container">container</a></li>
            
            <li><a href="/tags/curl">curl</a></li>
            
            <li><a href="/tags/debian">debian</a></li>
            
            <li><a href="/tags/design">design</a></li>
            
            <li><a href="/tags/designpattern">designpattern</a></li>
            
            <li><a href="/tags/dev">dev</a></li>
            
            <li><a href="/tags/development">development</a></li>
            
            <li><a href="/tags/devops">devops</a></li>
            
            <li><a href="/tags/dns">dns</a></li>
            
            <li><a href="/tags/docker">docker</a></li>
            
            <li><a href="/tags/drdb">drdb</a></li>
            
            <li><a href="/tags/encrypt">encrypt</a></li>
            
            <li><a href="/tags/filesystem">filesystem</a></li>
            
            <li><a href="/tags/functional">functional</a></li>
            
            <li><a href="/tags/glusterfs">glusterfs</a></li>
            
            <li><a href="/tags/go">go</a></li>
            
            <li><a href="/tags/golang">golang</a></li>
            
            <li><a href="/tags/helm">helm</a></li>
            
            <li><a href="/tags/http">http</a></li>
            
            <li><a href="/tags/ipv6">ipv6</a></li>
            
            <li><a href="/tags/kops">kops</a></li>
            
            <li><a href="/tags/kubernetes">kubernetes</a></li>
            
            <li><a href="/tags/lab">lab</a></li>
            
            <li><a href="/tags/letsencrypt">letsencrypt</a></li>
            
            <li><a href="/tags/linux">linux</a></li>
            
            <li><a href="/tags/machinelearning">machinelearning</a></li>
            
            <li><a href="/tags/microservice">microservice</a></li>
            
            <li><a href="/tags/minikube">minikube</a></li>
            
            <li><a href="/tags/mongodb">mongodb</a></li>
            
            <li><a href="/tags/network">network</a></li>
            
            <li><a href="/tags/nginx">nginx</a></li>
            
            <li><a href="/tags/postmortem">postmortem</a></li>
            
            <li><a href="/tags/prd">prd</a></li>
            
            <li><a href="/tags/product">product</a></li>
            
            <li><a href="/tags/project_management">project_management</a></li>
            
            <li><a href="/tags/python">python</a></li>
            
            <li><a href="/tags/router">router</a></li>
            
            <li><a href="/tags/rsa">rsa</a></li>
            
            <li><a href="/tags/s3">s3</a></li>
            
            <li><a href="/tags/scala">scala</a></li>
            
            <li><a href="/tags/scrum">scrum</a></li>
            
            <li><a href="/tags/security">security</a></li>
            
            <li><a href="/tags/shell">shell</a></li>
            
            <li><a href="/tags/ssh">ssh</a></li>
            
            <li><a href="/tags/ssl">ssl</a></li>
            
            <li><a href="/tags/startup">startup</a></li>
            
            <li><a href="/tags/tensorflow">tensorflow</a></li>
            
            <li><a href="/tags/ubiquity">ubiquity</a></li>
            
        </ul>
    </div>
    

    
</nav>

</div>
<div class="col-md-9 content">

<h1>How to setup minikube lab on debian 9 with virtualbox</h1>
<h4>Published 01-18-2019 00:00:00</h4>

<article>
    

<h1 id="how-to-setup-minikube-lab-on-debian-9-with-virtualbox">How to setup minikube lab on debian 9 with virtualbox</h1>

<h4 id="how-to-install-virtualbox-on-debian-9">How to install Virtualbox on debian 9</h4>

<pre><code class="language-bash">sudo add-apt-repository &quot;deb http://download.virtualbox.org/virtualbox/debian stretch contrib&quot;
wget -q https://www.virtualbox.org/download/oracle_vbox_2016.asc -O- | sudo apt-key add -
wget -q https://www.virtualbox.org/download/oracle_vbox.asc -O- | sudo apt-key add -
sudo apt-get update
sudo apt-get install virtualbox-5.2
</code></pre>

<h3 id="remove-old-version-of-minikube">Remove old version of minikube</h3>

<blockquote>
<pre><code class="language-bash">&gt; minikube stop
&gt;VBoxManage unregistervm minikube --delete
&gt;minikube detele
&gt;```

### Reinstall and start minikube

</code></pre>

<p>bash
minikube start -v 99</p>

<pre><code>
## Some tunning

### Upgrade minikube CPUs and Memory
</code></pre>

<p>bash
VBoxManage showvminfo minikube
VBoxManage controlvm minikube poweroff
VBoxManage modifyvm minikube &ndash;cpus 4
VBoxManage modifyvm minikube &ndash;memory &ldquo;16384&rdquo;</p>

<pre><code>
### Starting minikube

</code></pre>

<p>bash
VBoxManage controlvm minikube poweron</p>

<pre><code>
### Network configuration forward all this port to the VM and kubernetes

</code></pre>

<p>bash
for port in {30000..32767}; do
    VBoxManage controlvm minikube natpf1 &ldquo;NodePort$port,tcp,,$port,,$port&rdquo;;
done</p>

<pre><code>  

### Get docker environment

</code></pre>

<p>bash
root:xavier/ # minikube docker-env                                                                                                                                                                                                                                 [13:40:12]
export DOCKER_TLS_VERIFY=&ldquo;1&rdquo;
export DOCKER_HOST=&ldquo;tcp://192.168.99.100:2376&rdquo;
export DOCKER_CERT_PATH=&ldquo;/root/.minikube/certs&rdquo;
export DOCKER_API_VERSION=&ldquo;1.35&rdquo;</p>

<h1 id="run-this-command-to-configure-your-shell">Run this command to configure your shell:</h1>

<h1 id="eval-minikube-docker-env">eval $(minikube docker-env)</h1>

<pre><code>
Let’s run the docker-env command.

</code></pre>

<p>bash
eval $(minikube docker-env)</p>

<pre><code>
Look into it

</code></pre>

<p>bash</p>
</blockquote>

<p>root:xavier/ # eval $(minikube docker-env
root:xavier/ # docker ps
CONTAINER ID        IMAGE                  COMMAND                  CREATED             STATUS              PORTS               NAMES
247862b60f5c        4689081edb10           &ldquo;/storage-provisioner&rdquo;   About an hour ago   Up About an hour                        k8s_storage-provisioner_storage-provisioner_kube-system_8b922a24-1b61-11e9-91fd-080027ae8abf_3
cd1bf40de337        01cfa56edcfc           &ldquo;/usr/local/bin/kube…&rdquo;   About an hour ago   Up About an hour                        k8s_kube-proxy_kube-proxy-cqh5z_kube-system_b6d2d0b3-1b62-11e9-aaf6-080027ae8abf_0
a6c248ae4cc3        k8s.gcr.io/pause:3.1   &ldquo;/pause&rdquo;                 About an hour ago   Up About an hour                        k8s_POD_kube-proxy-cqh5z_kube-system_b6d2d0b3-1b62-11e9-aaf6-080027ae8abf_0
b3fdb95eda10        k8s.gcr.io/pause:3.1   &ldquo;/pause&rdquo;                 About an hour ago   Up About an hour                        k8s_POD_storage-provisioner_kube-system_8b922a24-1b61-11e9-91fd-080027ae8abf_1
2a712dbcd76d        f59dcacceff4           &ldquo;/coredns -conf /etc…&rdquo;   About an hour ago   Up About an hour                        k8s_coredns_coredns-86c58d9df4-pk62q_kube-system_8aaef122-1b61-11e9-91fd-080027ae8abf_1
1a16c20fb90c        f59dcacceff4           &ldquo;/coredns -conf /etc…&rdquo;   About an hour ago   Up About an hour                        k8s_coredns_coredns-86c58d9df4-dtmh9_kube-system_8aae76dc-1b61-11e9-91fd-080027ae8abf_1
e144d453fc14        k8s.gcr.io/pause:3.1   &ldquo;/pause&rdquo;                 About an hour ago   Up About an hour                        k8s_POD_coredns-86c58d9df4-pk62q_kube-system_8aaef122-1b61-11e9-91fd-080027ae8abf_1
618ee878bcee        k8s.gcr.io/pause:3.1   &ldquo;/pause&rdquo;                 About an hour ago   Up About an hour                        k8s_POD_coredns-86c58d9df4-dtmh9_kube-system_8aae76dc-1b61-11e9-91fd-080027ae8abf_1
1bb590994288        3cab8e1b9802           &ldquo;etcd &ndash;advertise-cl…&rdquo;   About an hour ago   Up About an hour                        k8s_etcd_etcd-minikube_kube-system_8490cea1bf6294c73e0c454f26bdf714_1
fa0a54ba2b9c        9c16409588eb           &ldquo;/opt/kube-addons.sh&rdquo;    About an hour ago   Up About an hour                        k8s_kube-addon-manager_kube-addon-manager-minikube_kube-system_5c72fb06dcdda608211b70d63c0ca488_1
c5485d727b93        177db4b8e93a           &ldquo;kube-apiserver &ndash;au…&rdquo;   About an hour ago   Up About an hour                        k8s_kube-apiserver_kube-apiserver-minikube_kube-system_cb9d596b745250234f0556b9549b3235_1
f0f6ce2c801f        b9027a78d94c           &ldquo;kube-controller-man…&rdquo;   About an hour ago   Up About an hour                        k8s_kube-controller-manager_kube-controller-manager-minikube_kube-system_a27cf7498262006bec6c9e79ae3ebd16_1
52d235760a32        3193be46e0b3           &ldquo;kube-scheduler &ndash;ad…&rdquo;   About an hour ago   Up About an hour                        k8s_kube-scheduler_kube-scheduler-minikube_kube-system_9729a196c4723b60ab401eaff722982d_1
4c9f44dbd183        k8s.gcr.io/pause:3.1   &ldquo;/pause&rdquo;                 About an hour ago   Up About an hour                        k8s_POD_etcd-minikube_kube-system_8490cea1bf6294c73e0c454f26bdf714_1
7f768e062efa        k8s.gcr.io/pause:3.1   &ldquo;/pause&rdquo;                 About an hour ago   Up About an hour                        k8s_POD_kube-controller-manager-minikube_kube-system_a27cf7498262006bec6c9e79ae3ebd16_1
8bcf8d6c8685        k8s.gcr.io/pause:3.1   &ldquo;/pause&rdquo;                 About an hour ago   Up About an hour                        k8s_POD_kube-apiserver-minikube_kube-system_cb9d596b745250234f0556b9549b3235_1
8cc7d04098fb        k8s.gcr.io/pause:3.1   &ldquo;/pause&rdquo;                 About an hour ago   Up About an hour                        k8s_POD_kube-scheduler-minikube_kube-system_9729a196c4723b60ab401eaff722982d_1
6c7184b50945        k8s.gcr.io/pause:3.1   &ldquo;/pause&rdquo;                 About an hour ago   Up About an hour                        k8s_POD_kube-addon-manager-minikube_kube-system_5c72fb06dcdda608211b70d63c0ca488_1</p>

<pre><code>

### Setup Kubernetes dashboard on minikube

</code></pre>

<p>bash
root:xavier/ # minikube dashboard &ndash;url &amp;
[1] 17085
root:xavier/ # Enabling dashboard &hellip;
Verifying dashboard health &hellip;
Launching proxy &hellip;
Verifying proxy health &hellip;
<a href="http://127.0.0.1:46597/api/v1/namespaces/kube-system/services/http:kubernetes-dashboard:/proxy/">http://127.0.0.1:46597/api/v1/namespaces/kube-system/services/http:kubernetes-dashboard:/proxy/</a></p>

<pre><code>
Using ssh to forward the dashboard
</code></pre>

<p>bash
(host machine)
$ ssh -L 8081:localhost:46597 xavier@10.0.0.154
surf to <a href="http://localhost:8081">http://localhost:8081</a></p>

<pre><code>### Setup Helm on minikube

</code></pre>

<p>bash
curl <a href="https://raw.githubusercontent.com/kubernetes/helm/master/scripts/get">https://raw.githubusercontent.com/kubernetes/helm/master/scripts/get</a> &gt; get_helm.sh
chmod 700 get_helm.sh
./get_helm.sh
````</p>

<h3 id="run-helm">Run helm</h3>

<pre><code>root:xavier/ # helm init                                                                                                                                                                                                                                           [14:12:43]
$HELM_HOME has been configured at /root/.helm.

Tiller (the Helm server-side component) has been installed into your Kubernetes Cluster.

Please note: by default, Tiller is deployed with an insecure 'allow unauthenticated users' policy.
To prevent this, run `helm init` with the --tiller-tls-verify flag.
For more information on securing your installation see: https://docs.helm.sh/using_helm/#securing-your-helm-installation
Happy Helming!
</code></pre>

<h3 id="test-helm">Test Helm</h3>

<pre><code class="language-bash">
root:xavier/ # helm search                                                                                                                                                                                                                                         [14:12:48]
NAME                                    CHART VERSION   APP VERSION                     DESCRIPTION
gitlab/auto-deploy-app                  0.2.4                                           GitLab's Auto-deploy Helm Chart
gitlab/gitlab                           0.2.0           11.0.0                          Web-based Git-repository manager with wiki and issue-trac...
gitlab/gitlab-omnibus                   0.1.37                                          GitLab Omnibus all-in-one bundle
gitlab/gitlab-runner                    0.1.28                                          GitLab Runner
gitlab/kubernetes-gitlab-demo           0.1.29                                          GitLab running on Kubernetes suitable for demos
stable/acs-engine-autoscaler            2.2.0           2.1.1                           Scales worker nodes within agent pools
stable/aerospike                        0.1.7           v3.14.1.2                       A Helm chart for Aerospike in Kubernetes
stable/anchore-engine                   0.1.7           0.1.10                          Anchore container analysis and policy evaluation engine s...
stable/apm-server                       0.1.0           6.2.4                           The server receives data from the Elastic APM agents and ...
stable/ark                              1.0.0           0.8.2                           A Helm chart for ark
stable/artifactory                      7.2.1           6.0.0                           Universal Repository Manager supporting all major packagi...
stable/artifactory-ha                   0.2.1           6.0.0                           Universal Repository Manager supporting all major packagi...
stable/aws-cluster-autoscaler           0.3.3                                           Scales worker nodes within autoscaling groups.
stable/bitcoind                         0.1.3           0.15.1                          Bitcoin is an innovative payment network and a new kind o...
stable/buildkite                        0.2.3           3                               Agent for Buildkite
stable/burrow                           0.4.3           0.17.1                          Burrow is a permissionable smart contract machine
stable/centrifugo                       2.0.1           1.7.3                           Centrifugo is a real-time messaging server.
stable/cert-manager                     v0.3.2          v0.3.0                          A Helm chart for cert-manager
stable/chaoskube                        0.7.0           0.8.0                           Chaoskube periodically kills random pods in your Kubernet...
</code></pre>

</article>



</div>
</div>
<script src="/js/theme.min.js" type="text/javascript"></script>


</body>
</html>

